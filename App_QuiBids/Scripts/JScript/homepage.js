function Class_Homepage() {
    var K = function () { Slot = function (at, aw, av, au) { this.idx = at; this.id = aw; this.dom = av; this.sticky = au; this.clear = function () { this.idx = 0; this.id = 0; this.dom = null; this.sticky = 0 } }; var ap = null; var ao = null; var al = "<h5 class='auction-item-title'></h5><span class='loading'></span>"; var aq = null; var ak = null; var ad = null; var am = null; var ar = null; var ae = null; var ag = 0; var aj = 150; var ab = ""; var af = null; var an = this; var Z; this.initialize = function (au, at, ax, av, aw) { ar = "#" + au; am = at; Z = $("." + am).first().clone(); ae = ax; if (av) { ag = av } if (aw) { aj = aw } this.clear() }; this.setReorderCallback = function (at) { af = at }; this.clear = function () { delete aq; delete ak; delete ad; delete ap; delete ao; ap = []; ao = []; aq = []; ak = {}; ad = {}; $("." + am).each(function (at) { ai(this); $(this).html(al) }) }; this.getCurrentOrder = function () { var at = []; $("." + am).each(function (au) { $(this).children().each(function () { var av = $(this).attr("id"); if (av > 0) { at.push(av) } }) }); return at }; var ah = function () { if (jQuery.browser.mobile || ($.browser.msie && ($.browser.version < 9))) { return } $(ar).sortable({ revert: true, cursor: "crosshair", opacity: 0.75, snap: true, stop: function (at, au) { if (af) { af() } } }); $(ar).find(".bid").each(function () { $(this).bind("mousedown", function (at) { return false }) }) }; var ai = function (au) { var at = aq.length; ak[at] = au; aq[at] = 0; return at }; var ac = function (ax, av) { if (ax == av) { return } var aw = ad[ax]; var au = ad[av]; var at = $(aw.dom).next(); $(aw.dom).detach().insertBefore($(au.dom)); $(au.dom).detach().insertBefore(at); ak[aw.idx] = au.dom; ak[au.idx] = aw.dom; aq[aw.idx] = au.id; aq[au.idx] = aw.id; var ay = aw.idx; aw.idx = au.idx; au.idx = ay }; this.unset = function (au) { ao.push(au.id); aq.splice(au.idx, 1); $(au.dom).removeClass("beginners"); if (aq.length > 1) { for (var at = au.idx; at + 1 < aq.length; at++) { ak[at] = ak[at + 1] } ak[aq.length - 1] = au.dom } else { ak[au.idx] = au.dom } $(au.dom).remove(); au.clear() }; this.setAuctions = function (az) { delete ap; delete ao; ap = []; ao = []; var aw = {}; for (var ax in az) { aw[az[ax].id] = 1 } for (var ax in ad) { if (typeof (aw[ad[ax].id]) == "undefined") { var av = false; var au = 999; var aB = null; for (j = aq.length - 1; j >= 0; j--) { try { var at = aq[j]; var aA = Auctions.getDetailed(at); if (!aA) { continue } if (aA.timeleft >= 90) { if (aA.timeleft < au && !(aA.price && aA.price > 0)) { au = aA.timeleft; av = true; aB = at } } else { j = -1 } } catch (ay) { } } if (av) { ac(ax, aB); this.unset(ad[ax]) } else { aq[ad[ax].idx] = 0 } delete ad[ax] } } showConsole("Auctions.length:", az.length); for (var ax in az) { aa(az[ax]) } for (var ax in aq) { if (aq[ax] == 0) { $(ak[ax]).remove() } } ah() }; var Y = function () { var at = 0; for (var au in aq) { if (aq[au] == 0) { return au } at++ } return -1 }; this.graids = function () { return ap }; this.ungraids = function () { return ao }; var aa = function (at) { var av = (at.id && at.id > 0) ? at.id : ""; var au = (at.ids && at.ids.length) ? at.ids : null; var ay = (at.html && at.html.length) ? at.html : ""; var aB = (at.c && at.c.length) ? at.c : ""; if (ay.length > 0) { if (!ad.hasOwnProperty(av)) { var aA = Y(); if (aA == -1) { var az = $(Z).clone().hide(); az.html(al); $(ar).append(az); aA = ai(az) } aq[aA] = av; var aw = ak[aA]; $(aw).each(function () { classes = $(this).attr("class").split(" "); for (ax in classes) { var aD = classes[ax]; if ((aD != "") && (aD != am)) { $(aw).removeClass(aD) } } }); $(aw).addClass(aB); if (ay.length) { $(aw).html(ay) } $(aw).find(".addwatchlist").each(function () { var aD = parseInt($(this).attr("value")); $(this).bind("click", function () { if ($(this).hasClass("remove")) { if (m.removeFromWatchList(aD)) { $(this).removeClass("remove"); $(this).html(_t.display("watchlist_add", "+ Watchlist")) } } else { if (m.addToWatchList(aD)) { $(this).addClass("remove"); $(this).html(_t.display("watchlist_remove", "- Watchlist")) } } }) }); $(aw).find(".auction-details-wrapper").each(function () { $(this).hide(); var aD = this; $(this).mouseleave(function () { $(aD).hide() }) }); $(aw).find(".auction-item-title").each(function () { var aD = null; var aE = aw; $(this).mouseenter(function () { $(aE).find(".auction-details-wrapper").each(function () { $(this).slideDown("fast"); $(this).mouseenter(function () { clearTimeout(aD); $(this).show() }) }) }); $(this).mouseleave(function () { $(aE).find(".auction-details-wrapper").each(function () { var aF = this; aD = setTimeout(function () { $(aF).hide() }, 60) }) }) }); $(aw).show(); var aC = new Slot(aA, av, aw, false); ad[av] = aC; $(document).bind("REMOVE_AUCTION_SPOT_" + av, function (aE, aD) { $(aC.dom).hide() }) } } if (au != null) { for (var ax in au) { ap.push(au[ax]) } } else { ap.push(av) } } }; var p = function () {
        var ab = this; var Z = ""; var Y = false; this.initialize = function (ad) {
            callback = ad; $("#search-for-results").hover(function () { if (!Y) { $("#search-for-results").find(".clear").each(function () { $(this).show() }) } }, function () { if (!Y) { $("#search-for-results").find(".clear").each(function () { $(this).hide() }) } }); $("#search-for-results").find(".q").each(function () { $(this).bind("click", function () { aa() }) }); $("#search-for-results").find(".cancel").each(function () { $(this).bind("click", function () { aa() }) }); $("#filter-panel").find(".search").each(function () { $(this).keypress(function (ae) { if (ae.which == 13) { ac($(this).val()) } }) }); $("#search-for-results").find(".search").each(function () { $(this).keypress(function (ae) { if (ae.which == 13) { ac($(this).val()) } }) }); $("#filter-panel").find(".go").each(function () {
                $(this).bind("click", function () {
                    var ae = "";
                    $("#search-for-results").find(".search").each(function () { ae = $(this).val() }); ac(ae)
                })
            }); $("#search-for-results").find(".clear").each(function () {
                $(this).bind("click", function () { ab.setSearchTerm(""); ac("") })
            }); $("#search-for-results").find(".go").each(function () { $(this).bind("click", function () { var ae = ""; $("#search-for-results").find(".search").each(function () { ae = $(this).val() }); ac(ae) }) })
        }; var ac = function (ad) { ab.setSearchTerm(ad); Y = true; aa(); callback(); n.hideMenu() }; var aa = function () { if (!Y) { $("#search-for-change-search").show(); $("#search-breadcrumb").hide(); $("#search-for-results").find(".search").each(function () { $(this).focus() }); Y = true } else { $("#search-for-change-search").hide(); $("#search-breadcrumb").show(); Y = false } }; this.getSearchTerm = this.getValue = function (ad) { return Z }; this.setSearchTerm = this.setValue = function (ad) { if (ad != null) { Z = ad } return this }; this.unserialize = function (ad) { this.setSearchTerm(ad) }; this.serialize = function () { return Z }; this.buildQuery = function () { if (Z.length) { return "&q=" + Z } return "" }
    }; var B = function () { var ab = this; var Z = null; var aa = "ending"; this.initialize = function (ac) { Z = "#auctiontype_tabs"; $(Z + " a").each(function () { var ad = this; $(ad).click(function () { var ae = $(ad).attr("type"); ab.setType(ae); $("#tabTypeTitle").html(ae.charAt(0).toUpperCase() + ae.substr(1)); ac(); return false }) }) }; var Y = null; getUpcoming = function () { }; this.disableUpcoming = function () { }; this.enableUpcoming = function () { }; this.changeActiveState = function (ac) { }; this.getType = this.getValue = function (ac) { return aa }; this.setType = this.setValue = function (ac) { if (ac != null && ac.length) { aa = ac } return this }; this.unserialize = function (ac) { this.setType(ac) }; this.serialize = function () { return aa }; this.buildQuery = function () { return "&type=" + aa } }; var D = function () { var ac = this; var aa = null; var ad = null; var ab = 0; var Z = 0; var ae = []; var Y = ""; initTab = function () { $(aa + " a").each(function () { var af = this; if ($(af).parent().hasClass("active")) { ac.setValue($(af).attr("tab")); ac.setHref($(af).attr("href")) } }) }; this.initialize = function (ag, af, ah) { this.setCategoryFilters(ag); this.setFullUrl(af); aa = "#category-panel"; ad = "#category-title"; $(ad).mouseover(function () { $(this).addClass("active"); $(aa).toggle("fade", "fast"); return false }); $(aa).mouseleave(function () { $(aa).hide("fade", "normal"); $(ad).removeClass("active") }); $(aa + " a").each(function () { var ai = this; $(ai).click(function () { $(aa).hide("fade", "normal"); $(ad).removeClass("active"); $(ad).html($(ai).html()); $(ad).removeClass(function (aj, ak) { return (ak.match(/id-[\d]+/g) || []).join(" ") }); $(ad).addClass("id-" + $(ai).attr("tab")); ac.changeActiveState($(ai)); ac.setValue($(ai).attr("tab")); ac.setHref($(ai).attr("href")); ac.resetCategoryFilters(); ac.resetFullUrl(); ah(); return false }) }); initTab() }; this.changeActiveState = function (af) { $(af).parent().siblings().each(function () { $(this).removeClass("active") }); $(af).parent().addClass("active") }; this.buildQuery = function () { cats = ""; if (ae.length) { cats = "&cats[]=" + ae.join(",") } return "&tab=" + ab + cats }; this.getHref = function () { if (Y.length) { return Y } return Z }; this.setHref = function (af) { Z = af }; this.getTab = this.getValue = function (af) { return ab }; this.setTab = this.setValue = function (af) { if (af != null && af.length) { if ((af == "p") || (af == "w")) { V.disableUpcoming() } else { V.enableUpcoming() } ab = af } return this }; this.reset = function () { this.resetFullUrl(); this.resetCategoryFilters(); this.tab = 0; this.href = "" }; this.resetFullUrl = function () { Y = "" }; this.resetCategoryFilters = function () { ae = [] }; this.setFullUrl = function (af) { if (af != null && af.length) { Y = af } }; this.setCategoryFilters = function (af) { if (af != null && af.length) { ae = af } }; this.unserialize = function (af) { if (typeof (af) == "object") { this.setTab(af.tab); this.setHref(af.href); this.setCategoryFilters(af.categoryFilters); this.setFullUrl(af.fullUrl); $(aa + " a").each(function () { var ag = this; if ($(this).attr("tab") == af.tab) { ac.changeActiveState($(ag)); $(ad).html($(ag).html()) } }) } }; this.serialize = function () { value = {}; value.tab = ab; value.href = Z; value.fullUrl = Y; value.categoryFilters = ae; return value } };
    var w = function () {
        var ab = this;
        var aa = null;
        var ac = null;
        var ad = null; var af = null; var Z = null; var ae = false; var Y = 850;
        this.initialize = function (ah, ag) {
            ae = ah; callback = ag; ac = "#filter-panel"; ad = "#category-title", Z = "#filtersbutton"; af = "#filter-breadcrumb"; if (ae) { $(ac).height($(ac).height() + 25); $("#filter-panel-apply").click(function () { callback() }); $("#filter-panel-apply").show(); Y = 2500 }
            $(Z).click(function () {
                if ($(this).hasClass("active")) { ab.hideMenu() }
                else { ab.showMenu() } return false
            });
            $(ac).mouseleave(function () {
                $(this).hide("fade", "normal"); $(Z).removeClass("active")
            });
            $(ac + " input").each(function () {
                var ai = this;
                if ($(this).attr("checked") == "checked")
                { ab.addFilter(ai, false) }
                $(ai).click(function () {
                    if ($(ai).attr("checked") == "checked") { ab.addFilter(ai, true) }
                    else { ab.removeFilter(ai) } ab.delayCallback(callback)
                })
            })
        };
        this.showMenu = function () { $(Z).addClass("active"); $(ac).show("fade", "fast") }; this.hideMenu = function () { $(Z).removeClass("active"); $(ac).hide("fade", "fast") }; this.addFilter = function (ah, ai) {
            if (ai) { U.setPage(1) } $(document).bind("REMOVE_FILTER_" + $(ah).attr("value"), function (ak, aj) {
                ab.removeFilter(ah)
            });
            var ag = '$(document).trigger("REMOVE_FILTER_' + $(ah).attr("value") + '"); return false;'; html = "<li value='" + $(ah).attr("value") + "'><a onClick='" + ag + "' href=''>" + $(ah).data("label") + "</a></li>"; $(af).append(html)
        };
        this.removeFilter = function (ag) { U.setPage(1); $(af).find("*[value*='" + $(ag).attr("value") + "']").each(function () { $(this).remove() }); $(ac).find("*[value*='" + $(ag).attr("value") + "']").each(function () { $(this).removeAttr("checked") }); if (m.notUsingAjax()) { ab.delayCallbackLimited(callback) } else { ab.delayCallback(callback) } }; this.delayCallback = function (ag) { if (aa != null) { clearTimeout(aa) } aa = setTimeout(function () { ag() }, Y) }; this.delayCallbackLimited = function (ag) { if (aa != null) { clearTimeout(aa) } delayTimerLimited = Y; if (delayTimerLimited > 1000) { delayTimerLimited = 1000 } aa = setTimeout(function () { ag() }, delayTimerLimited) }; this.getValue = function (ag) { return this.serialize() }; this.setValue = function (ag) { if (typeof (val) != "undefined") { } return this }; this.unserialize = function (ak) { $(af).html(""); $(ac + " input").each(function () { $(this).attr("checked", false) }); if (typeof (ak) == "object") { for (var ah in ak.values) { var aj = "value_" + ak.values[ah]; var ai = this; $(ac + " input").each(function () { if ($(this).val() == aj) { $(this).attr("checked", true); ai.addFilter(this) } }) } for (var ah in ak.features) { var ag = "feature_" + ak.features[ah]; var ai = this; $(ac + " input").each(function () { if ($(this).val() == ag) { $(this).attr("checked", true); ai.addFilter(this) } }) } } }; this.serialize = function () { var ai = {}; var ah = []; var ag = []; $(ac + " input").each(function () { if ($(this).attr("checked") == "checked") { var al = $(this).val(); var ak = al.split("_"); var aj = ak.shift(); if (aj == "feature") { ah[ah.length] = ak.join("_") } else { if (aj == "value") { ag[ag.length] = ak.join("_") } } } }); ai.features = ah; ai.values = ag; return ai }; this.buildQuery = function () { var ah = ""; var ag = this.serialize(); if (ag.features.length) { ah = ah + "&features[]=" + ag.features.join(",") } if (ag.values.length) { ah = ah + "&values[]=" + ag.values.join(",") } return ah }
    };
    var E = function () {
        var ab = this;
        var aa = null;
        var ae = null;
        var ad = null;
        var Z = "endingsoon";
        var Y = null;
        this.initialize = function (af) {
            ae = "#sort-panel";
            ad = "#sort-title";
            Y = "#sort-button";
            $(Y).click(
                function () {
                if ($(this).hasClass("active")) { ab.hideMenu() } else { ab.showMenu() } return false
                });
            $(ae).mouseleave(
                function () {
                    $(this).hide("fade", "normal");
                    $(Y).removeClass("active")
                }); $(ae + " input").each(function () { var ag = this; $(ag).click(function () { ab.delayCallback(af); ac(); $(ae).hide() }) }); ac()
        };
        var ac = function () {
            $(ae + " input").each(function () {
                if ($(this).attr("checked") == "checked") {
                    ab.setTitle($(this).attr("title")); var ah = $(this).val(); var ag = ah.split("_"); var af = ag.shift(); if (af == "sortby") { ab.setValue(ag.join("_")) }
                }
            })
        }; this.setTitle = function (af) {
            $(ad).html(af)
        }; this.showMenu = function () {
            $(Y).addClass("active"); $(ae).show("fade", "fast")
        }; this.hideMenu = function () {
            $(Y).removeClass("active"); $(ae).hide("fade", "fast")
        };
        this.delayCallback = function (af) {
            if (aa != null) { clearTimeout(aa) } aa = setTimeout(function () { af() }, 850)
        }; this.getSort = this.getValue = function (af) {
            return Z
        }; this.setSort = this.setValue = function (af) {
            if (af != null && af.length) { Z = af } return this
        }; this.unserialize = function (af) {
            this.setSort(af); $(ae + " input").each(function () { showConsole($(this)); if ($(this).val() == ("sortby_" + af)) { $(this).attr("checked", true) } else { $(this).attr("checked", false) } }); ac()
        }; this.serialize = function () {
            return Z
        }; this.buildQuery = function () {
            var ag = ""; var af = this.serialize(); if (af.length) { ag = ag + "&sort=" + af } return ag
        }
    }; var t = function () {
        var ac = this; var ab = null; var Z = ".pageclick"; var Y = ".pagination"; var ad = 0; var aa = 0; this.reset = function () { ad = 0 }; this.pageReload = function () { this.setHtml(""); this.setHasPaging(false) }; this.setEa = function (ae) { if ((typeof (ae) != "undefined") && (ae > 0)) { aa = parseInt(ae) } }; this.getEa = function () { return aa }; this.setHtml = function (ae) { $(Y).html(ae) }; this.setHasPaging = function (ae) { (ae) ? $(Y).show() : $(Y).hide(); return this }; this.initialize = function (ae) { }; this.addPagingEvents = function () { try { $(Z).click(function () { ac.setValue($(this).attr("page")); $("html, body").animate({ scrollTop: $("#auctions").offset().top }, 1000); if (m.nonHtmlRedirectCheck()) { m.reload(true, true) } return false }) } catch (ae) { showConsole(ae, "JS Error Class_PagingManager.addPagingEvent"); return false } }; this.getPage = this.getValue = function () { return ad }; this.setPage = this.setValue = function (ae) { if (ae != null && ae > 0) { ad = ae; m.resetReload() } return this }; this.unserialize = function (ae) { if (typeof (ae) == "object") { this.setPage(ae.page); this.setEa(ae.ea) } }; this.serialize = function () { value = {}; value.ea = aa; value.page = ad; return value }; this.buildQuery = function () { var af = ""; var ae = this.getPage(); if (ae > 0) { af = af + "&p=" + ae; if (aa > 0) { af = af + "&ea=" + aa } } return af }
    }; var y = function () {
        var Z = this; var Y = 0; this.initialize = function (aa, ab) { this.setBrandId(aa) }; this.getBrandId = function () { return Y }; this.setBrandId = function (aa) { if (!aa) { aa = 0 } Y = parseInt(aa) }; this.unserialize = function (aa) { this.setBrand(aa) }; this.serialize = function () { return Y }; this.buildQuery = function () { var aa = ""; if (Y > 0) { aa = aa + "&b=" + Y } return aa }
    }; var r = null; var V = null; var R = null;
    var n = null; var z = null; var c = null; var U = null; var H = null; var O = 1000 * 20; var T = 1000 * 60; var v = null; var M = null; var m = this; var W = null; var S = null; var o = true; var G = false; var x = ""; var e = null; var C = 0; var Q = null; this.initialize = function (ab) {
        Q = ab; try {
            var Y = ""; var ad = 1; var ac = 0; var aa = null; var Z = 0; if (typeof ab == "object") { if (ab.brand_id) { Z = ab.brand_id } if (ab.search_term) { S = ab.search_term } if (ab.tab_type) { Y = ab.tab_type } if (ab.page) { ad = ab.page } if (ab.ea) { ac = ab.ea } if (ab.uri) { x = ab.uri } if (ab.category_filters) { aa = ab.category_filters } if (typeof ab.ajax_only != "undefined") { e = ab.ajax_only } } $(".layout-view a").each(function () { if ($(this).hasClass("list")) { if ($(this).hasClass("active")) { G = true } } if ($(this).hasClass("list") || $(this).hasClass("grid")) { $(this).bind("click", function () { if (G && $(this).hasClass("grid")) { G = false; m.reload(true); $(".layout-view a").each(function () { if ($(this).hasClass("list")) { $(this).removeClass("active") } else { if ($(this).hasClass("grid")) { $(this).addClass("active") } } }) } else { if (!G && $(this).hasClass("list")) { G = true; m.reload(true); $(".layout-view a").each(function () { if ($(this).hasClass("grid")) { $(this).removeClass("active") } else { if ($(this).hasClass("list")) { $(this).addClass("active") } } }) } } }) } }); showConsole("Bind AUCTION_COMPLETED to increment spots reload timer."); $(document).bind("AUCTION_COMPLETED", function (ag, af) { o = true; m.bumpReloadTime() }); showConsole("Initializing Search  Manager"); A(); r.setValue(S); showConsole("Initializing Paging Manager"); d(); U.setPage(ad); U.setEa(ac); showConsole("Initializing Auction Types  Manager"); X(); V.setType(Y); showConsole("Initializing Sub Categories Manager"); f(aa, x); showConsole("Initializing Filters Manager"); P(); showConsole("Initializing Sorts Manager"); b(); showConsole("Initializing Brand Manager"); a(Z); N(); m.reload(false)
        } catch (ae) { showConsole("Exception in homepage init") }
    }; var k = function () { return "qb_" + V.getType() + "_" + R.getTab() }; this.getSession = function (Z) { return; if (typeof (Storage) !== "undefined") { var Y = k(); if ((R.getTab() == "p") || (R.getTab() == "2")) { return localStorage[Y] } return sessionStorage[Y] } }; this.saveSession = function () { S = r.getSearchTerm(); if (!S && (S.length == 0)) { if (typeof (Storage) !== "undefined") { var Y = k(); if ((R.getTab() == "p") || (R.getTab() == "2")) { localStorage[Y] = H.getCurrentOrder() } else { sessionStorage[Y] = H.getCurrentOrder() } showConsole("Session Data: ", this.getSession()) } } }; var N = function () { delete H; H = new K(); H.initialize("spots", "auction-item-wrapper", "Order[" + R.getValue() + "_" + V.getValue() + "]"); H.setReorderCallback(function () { m.saveSession() }) }; var h = function () { if (R.getTab() == "p" || R.getTab() == "c") { return false } else { if (V.getType() == "office") { return true } else { if ((V.getType() == "upcoming") || (U.getPage() > 1)) { return false } } } return true }; var u = function () { if (!h()) { if (v) { clearTimeout(v) } if (M) { clearTimeout(M) } v = setTimeout(function () { u() }, O) } else { if (C < 1) { showConsole("setting spots to reload every: " + (O / 1000)); l(O) } } }; var g = null; forceReloadSpotsInSeconds = function (Y) { if ((!g) && typeof Y == "number" && Y > 0) { showConsole("Forcing reloading spots in " + Y + " seconds."); g = setTimeout(function () { showConsole("Forcing reloading spots NOW!"); g = null; m.reloadSpots(true) }, (Y * 1000) + 500) } }; this.reloadNow = function () { m.reloadSpots(true); u() }; var l = function (Y) { if (h()) { if (!v) { v = setTimeout(function () { m.reloadSpots(true); u(); C--; v = null; if (C > 0) { l(Y) } }, Y) } } }; this.bumpReloadTime = function () { var Y = 20000; C++; showConsole("auction ended. Setting spots to reload in " + (Y / 1000) + " seconds, " + C + " in queue to reload. "); l(Y) }; this.resetReload = function () { if (v) { u() } }; var A = function () { delete r; r = new p(); r.initialize(function () { if (m.nonHtmlRedirectCheck()) { m.reload(true, true) } }) }; var X = function () { delete V; V = new B(); V.initialize(function () { m.resetPaging(); if (m.nonHtmlRedirectCheck()) { m.reload(true, true) } }) }; var f = function (Z, Y) { delete R; R = new D(); R.initialize(Z, Y, function () { if (m.nonHtmlRedirectCheck()) { m.reload(true, true) } }) }; var P = function () { delete n; n = new w(); n.initialize(m.notUsingAjax(), function () { if (m.nonHtmlRedirectCheck()) { m.reload(true, true) } }) }; var a = function (Y) { delete c; c = new y(); c.initialize(Y) }; var b = function () { delete z; z = new E(); z.initialize(function () { if (m.nonHtmlRedirectCheck()) { m.reload(true, true) } }) }; this.resetPaging = function () { if (U) { U.reset() } }; var d = function () { delete U; U = new t(); U.initialize(function () { if (m.nonHtmlRedirectCheck()) { m.reload(true, true) } }) }; this.hideBanner = function () { try { $(".slider_banner").fadeOut("fast"); return false } catch (Y) { showConsole(Y, "JS Error hideBanner") } }; var J = {}; this.setBanners = function (aa, Y) { try { var Z = 1; for (i in Y) { J[Z] = aa + Y[i]; Z = Z + 1 } return true } catch (ab) { showConsole(ab, "JS Error setBanners"); return false } }; this.reload = function (Z, Y) { if (typeof Y === "undefined") { Y = false } if (Z == true) { I(Y) } m.reloadSpots() }; this.removeFromWatchList = function (Y) { showConsole("Remove from watch list auction id: " + Y); var Z = Auctions.removeWatched(Y); if (R.getTab() == "w") { $(document).trigger("REMOVE_AUCTION_SPOT_" + Y) } return Z }; this.addToWatchList = function (Y) {
        showConsole("Adding to watch list auction id: " + Y); return Auctions.addWatched(Y)
    }; var s = function () {
        var Y = ""; var ae = ""; var ad = ""; var ag = r.getSearchTerm(); var ab = "?"; if (ag.length) { ad = ab + "q=" + ag; ab = "&" } var aa = c.getBrandId(); if (aa > 0) { ad = ab + "b=" + aa; ab = "&" } var Z = n.serialize(); if (Z.features.length) { Y += "/" + Z.features.join("-"); ae += "f" } if (Z.values.length) { Y += "/" + Z.values.join("+"); ae += "v" } var af = z.serialize(); if (af != "endingsoon") { ae += "s"; Y += "/" + z.serialize() } var ac = U.getPage(); if (ac > 1) { ae += "p"; Y += "/" + ac; if (U.getEa() > 0) { ae += "e"; Y += "/" + U.getEa() } } x = x.replace("/auctions-live", ""); x = x.replace(/\/+$/, ""); if (ae.length) { if (x.length > 3) { return x + "/qb/" + ae + Y + ad } return x + "/auctions-live/qb/" + ae + Y + ad } return x + "/" + ad
    }; this.reloadSpots = function (Z) {
        if (Z == false && o == false) { return } if (M) { clearTimeout(M); M = null } try { if (Z) { } else { H.clear(); Auctions.unregister(0) } $("#no_results_container").hide(); var aa = r.buildQuery(); var Y = "a=h" + aa + V.buildQuery() + R.buildQuery() + n.buildQuery() + z.buildQuery() + U.buildQuery() + c.buildQuery(); Y += G ? "&v=l" : "&v=g"; auctionIds = H.getCurrentOrder(); if ((U.getPage() > 1) || (aa && aa.length)) { } else { if (auctionIds.length > 0) { Y += "&zs=" + auctionIds } else { var ab = m.getSession(); if (ab && ab.length) { Y += "&zs=" + ab + "&refresh=1" } } } showConsole("/ajax/spots.php?" + Y); W = $.ajax({ url: "/ajax/spots.php", cache: true, dataType: "json", data: Y, type: "POST", timeout: 10000, success: function (ad) { U.pageReload(); var ae = 0; for (id in ad) { try { if (id == "Auctions") { ae += ad[id].length; H.setAuctions(ad[id]); if (R.getTab() != "c") { Auctions.register(H.graids()); Auctions.unregister(H.ungraids()) } reTool() } else { if (id == "Pages" && ad[id].html.length > 0) { U.setHtml(ad[id].html); U.setEa(ad[id].ea); U.setHasPaging(true); U.addPagingEvents() } else { if (id == "nrt") { forceReloadSpotsInSeconds(ad[id]) } } } } catch (af) { showConsole(af, "JS Error loading spots") } } (ae) ? $("#no_results_container").hide() : $("#no_results_container").show() }, error: function (ae, af, ad) { if (af === "timeout") { m.reloadNow() } } }); o = false } catch (ac) { showConsole(ac, "JS Error reloadSpots"); return false }
    }; this.notUsingAjax = function () {
        if (e == true) { return false } else { if (e === false || typeof window.history.pushState === "undefined") { return true } } return false
    }; this.nonHtmlRedirectCheck = function () {
        if (m.notUsingAjax()) { var Y = s(); window.location = Y; return false } return true
    }; var F = function () {
        var Y = {
            filters: n.serialize(), sort: z.serialize(), subcategories: R.serialize(), auctiontypes: V.serialize(), brand_id: c.serialize(), search: r.serialize(), paging: U.serialize()
        }; return Y
    }; var I = function (Y) {
        try {
            if (typeof window.history.pushState === "undefined") { } else { if ((U.getPage() == 1) || (Y == true)) { window.history.pushState(F(), "QuiBids", s()); Auctions.triggerActivity() } }
        } catch (Z) { showConsole(Z, "JS Error saveHistory"); return false }
    };
    var q = ("state" in window.history && window.history.state !== null), L = location.href;
    $(window).bind("popstate", function (Z) {
        var Y = !q && location.href == L; q = true; if (Y) { return } var aa = Z.originalEvent.state;
        if (aa) {
            showConsole(aa, "Applying Stateful"); z.unserialize(aa.sort); n.unserialize(aa.filters);
            V.unserialize(aa.auctiontypes); R.unserialize(aa.subcategories); r.unserialize(aa.search); U.unserialize(aa.paging); c.unserialize(aa.brand_id)
        } else {
            if (Q) {
                z.unserialize("endingsoon"); n.unserialize(); V.unserialize("ending"); R.reset(); r.unserialize(""); U.unserialize(1); c.unserialize(0)
            }
        } m.reload()
    }
    )
}
Homepage = new Class_Homepage();